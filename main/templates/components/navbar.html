{% load static %}

<!-- üî¥ Best placed in base.html <head>, kept here as requested -->
<meta name="google" content="notranslate">

<nav class="navbar navbar-expand-lg" style="background:#309060;">
  <div class="container">

    <!-- Brand (Mobile only) -->
    <a class="navbar-brand text-white fw-bold d-lg-none" href="{% url 'index' %}">
      ADIVASI BANDHU
    </a>

    <!-- Mobile toggle -->
    <button
      class="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse position-relative" id="navbarNav">

      <!-- ===================== -->
      <!-- DESKTOP NAV (CENTER)  -->
      <!-- ===================== -->
      <ul class="navbar-nav fw-bold position-absolute start-50 translate-middle-x d-none d-lg-flex">
        <li class="nav-item">
          <a class="nav-link text-white" href="{% url 'index' %}">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-white" href="{% url 'scheme' %}">Schemes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-white" href="{% url 'apply' %}">How to Apply</a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-white" href="{% url 'help' %}">Get Help</a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-white" href="{% url 'contact' %}">Contact</a>
        </li>
      </ul>

      <!-- ===================== -->
      <!-- MOBILE NAV (ACCORDION)-->
      <!-- ===================== -->
      <div class="accordion w-100 d-lg-none mt-3" id="mobileNavAccordion">

        <div class="accordion-item border-0">
          <h2 class="accordion-header">
            <a href="{% url 'index' %}" class="accordion-button collapsed fw-bold">
              Home
            </a>
          </h2>
        </div>

        <div class="accordion-item border-0">
          <h2 class="accordion-header">
            <a href="{% url 'scheme' %}" class="accordion-button collapsed fw-bold">
              Schemes
            </a>
          </h2>
        </div>

        <div class="accordion-item border-0">
          <h2 class="accordion-header">
            <a href="{% url 'apply' %}" class="accordion-button collapsed fw-bold">
              How to Apply
            </a>
          </h2>
        </div>

        <div class="accordion-item border-0">
          <h2 class="accordion-header">
            <a href="{% url 'help' %}" class="accordion-button collapsed fw-bold">
              Get Help
            </a>
          </h2>
        </div>

        <div class="accordion-item border-0">
          <h2 class="accordion-header">
            <a href="{% url 'contact' %}" class="accordion-button collapsed fw-bold">
              Contact
            </a>
          </h2>
        </div>

        <!-- üåê LANGUAGE (MOBILE) -->
        <div class="mt-3">
          <select id="langSelectMobile" class="form-select form-select-sm">
            <option value="">üåê Select Language</option>
            <option value="en">English</option>
            <option value="hi">Hindi</option>
            <option value="mr">Marathi</option>
          </select>
        </div>

      </div>

      <!-- ===================== -->
      <!-- LANGUAGE (DESKTOP)    -->
      <!-- ===================== -->
      <div class="ms-auto d-none d-lg-block">
        <select id="langSelect" class="form-select form-select-sm w-auto">
          <option value="">üåê Select Language</option>
          <option value="en">English</option>
          <option value="hi">Hindi</option>
          <option value="mr">Marathi</option>
        </select>
      </div>

    </div>
  </div>
</nav>

<!-- üîí REQUIRED GOOGLE TRANSLATE ELEMENT (HIDDEN) -->
<div id="google_translate_element" style="display:none;"></div>

<!-- ===================== -->
<!-- CSS FIXES             -->
<!-- ===================== -->
<style>
  .goog-te-banner-frame,
  .goog-te-banner-frame.skiptranslate,
  .goog-logo-link,
  .goog-te-gadget,
  .goog-te-gadget span {
    display: none !important;
  }

  html, body {
    top: 0 !important;
    position: static !important;
  }

  /* Accordion styling for mobile */
  .accordion-button {
    background: #309060;
    color: #fff;
  }

  .accordion-button:not(.collapsed) {
    background: #309060;
    color: #fff;
  }

  .accordion-button::after {
    filter: invert(1);
  }
</style>

<!-- ===================== -->
<!-- GOOGLE TRANSLATE LOGIC -->
<!-- ===================== -->
<script>
  function googleTranslateElementInit() {
    new google.translate.TranslateElement(
      { pageLanguage: 'en', autoDisplay: false },
      'google_translate_element'
    );
  }

  function setLanguage(lang) {
    if (!lang) return;
    document.cookie = "googtrans=/en/" + lang + ";path=/";
    document.cookie = "googtrans=/en/" + lang + ";path=/;domain=" + location.hostname;
    location.reload();
  }

  function bindLangSelect(id) {
    const el = document.getElementById(id);
    if (!el) return;
    el.addEventListener("change", function () {
      setLanguage(this.value);
    });
  }

  bindLangSelect("langSelect");
  bindLangSelect("langSelectMobile");
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script>
  function killGoogleBar() {
    const bar = document.querySelector(".goog-te-banner-frame");
    if (bar) bar.style.display = "none";
    document.body.style.top = "0px";
    document.documentElement.style.top = "0px";
  }
  killGoogleBar();
  setInterval(killGoogleBar, 300);
</script>
